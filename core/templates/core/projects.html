{% extends 'core/base.html' %}

{% block title %}Projects | Siddharth{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section" style="min-height: 60vh; display: flex; align-items: center; position: relative; overflow: hidden;">
    <div class="container">
        <div class="row justify-content-center text-center">
            <div class="col-lg-8">
                <div class="hero-content">
                    <!-- Status Badge -->
                    <div class="status-badge glass" style="display: inline-flex; align-items: center; gap: 8px; padding: 8px 16px; border-radius: var(--radius-full); margin-bottom: var(--spacing-md);">
                        <div style="width: 8px; height: 8px; background: var(--accent-success); border-radius: 50%; animation: pulse 2s infinite;"></div>
                        <span style="font-size: 14px; color: var(--text-secondary);">Python Developer</span>
                    </div>
                    
                    <!-- Main Heading -->
                    <h1 class="hero-title" style="font-size: clamp(2.5rem, 5vw, 4rem); font-weight: 700; line-height: 1.1; margin-bottom: var(--spacing-md);">
                        My <span class="text-gradient">Projects</span>
                    </h1>
                    
                    <!-- Description -->
                    <p style="font-size: 1.2rem; color: var(--text-secondary); margin-bottom: var(--spacing-lg); line-height: 1.6; max-width: 600px; margin-left: auto; margin-right: auto;">
                        A showcase of my latest work, featuring AI/ML applications, web development projects, and innovative solutions built with modern technologies.
                    </p>
                    
                    <!-- Stats -->
                    <div class="stats-container" style="margin-bottom: var(--spacing-xl);">
                        <div class="stat-card">
                            <div class="stat-number">3+</div>
                            <div class="stat-label">Projects Built</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">2</div>
                            <div class="stat-label">AI/ML Projects</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">1</div>
                            <div class="stat-label">Web Projects</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Filters Section -->
<section class="section" style="background: var(--bg-secondary);">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="glass" style="padding: var(--spacing-lg); border-radius: var(--radius-xl);">
                    <div class="row align-items-center">
                        <!-- Search -->
                        <div class="col-lg-4 mb-3">
                            <div style="position: relative;">
                                <input type="text" id="searchInput" placeholder="Search projects..." 
                                       style="width: 100%; padding: 12px 16px 12px 48px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: var(--radius-lg); color: var(--text-primary); font-size: 14px;">
                                <i class="fas fa-search" style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: var(--text-muted);"></i>
                            </div>
                        </div>
                        
                        <!-- Category Filter -->
                        <div class="col-lg-3 mb-3">
                            <select id="categoryFilter" style="width: 100%; padding: 12px 16px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: var(--radius-lg); color: var(--text-primary); font-size: 14px;">
                                <option value="">All Categories</option>
                                <option value="web">Web Development</option>
                                <option value="ai">AI/ML</option>
                                <option value="mobile">Mobile</option>
                                <option value="api">API</option>
                            </select>
                        </div>
                        
                        <!-- Sort -->
                        <div class="col-lg-3 mb-3">
                            <select id="sortFilter" style="width: 100%; padding: 12px 16px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: var(--radius-lg); color: var(--text-primary); font-size: 14px;">
                                <option value="featured">Featured First</option>
                                <option value="recent">Most Recent</option>
                                <option value="name">Name A-Z</option>
                            </select>
                        </div>
                        
                        <!-- Clear Filters -->
                        <div class="col-lg-2 mb-3">
                            <button id="clearFilters" class="btn btn-secondary" style="width: 100%;">
                                <i class="fas fa-times me-2"></i>Clear
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Projects Grid -->
<section class="section">
    <div class="container">
        <div class="row" id="projectsGrid">
            {% for project in projects %}
            <div class="col-lg-6 col-xl-4 mb-4 project-item" data-category="{{ project.category }}" data-title="{{ project.title|lower }}">
                <div class="card h-100 project-card" style="position: relative; overflow: hidden;">
                    <!-- Project Image/Icon -->
                    <div style="height: 200px; background: var(--gradient-dark); display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden;">
                        <i class="fas fa-{% if project.category == 'web' %}globe{% elif project.category == 'mobile' %}mobile-alt{% elif project.category == 'ai' %}brain{% elif project.category == 'api' %}server{% else %}code{% endif %}" style="font-size: 64px; color: var(--accent-primary); z-index: 1;"></i>
                        
                        <!-- Animated Background -->
                        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; opacity: 0.1;">
                            <div style="position: absolute; top: 10%; left: 10%; width: 100px; height: 100px; background: var(--accent-primary); border-radius: 50%; filter: blur(40px); animation: float 4s ease-in-out infinite;"></div>
                            <div style="position: absolute; bottom: 20%; right: 15%; width: 150px; height: 150px; background: var(--accent-secondary); border-radius: 50%; filter: blur(60px); animation: float 6s ease-in-out infinite reverse;"></div>
                        </div>
                        
                        <!-- Featured Badge -->
                        {% if project.featured %}
                        <div style="position: absolute; top: 16px; right: 16px; background: var(--accent-primary); color: var(--text-inverse); padding: 4px 12px; border-radius: var(--radius-full); font-size: 12px; font-weight: 600;">
                            <i class="fas fa-star me-1"></i>Featured
                        </div>
                        {% endif %}
                    </div>
                    
                    <div class="card-body" style="padding: var(--spacing-lg);">
                        <!-- Category Badge -->
                        <div style="margin-bottom: var(--spacing-sm);">
                            <span style="background: rgba(0, 212, 255, 0.1); color: var(--accent-primary); padding: 6px 12px; border-radius: var(--radius-full); font-size: 12px; font-weight: 600; text-transform: uppercase;">
                                {{ project.get_category_display }}
                            </span>
                        </div>
                        
                        <!-- Project Title -->
                        <h4 style="font-size: 1.25rem; font-weight: 600; color: var(--text-primary); margin-bottom: var(--spacing-sm);">{{ project.title }}</h4>
                        
                        <!-- Project Description -->
                        <p style="color: var(--text-secondary); margin-bottom: var(--spacing-md); line-height: 1.6;">
                            {{ project.description|truncatewords:30 }}
                        </p>
                        
                        <!-- Technologies Used -->
                        {% if project.technologies.all %}
                        <div style="margin-bottom: var(--spacing-md);">
                            <div style="display: flex; flex-wrap: wrap; gap: 6px;">
                                {% for tech in project.technologies.all|slice:":5" %}
                                <span style="background: var(--bg-secondary); color: var(--text-secondary); padding: 4px 8px; border-radius: var(--radius-sm); font-size: 11px;">
                                    {{ tech.name }}
                                </span>
                                {% endfor %}
                                {% if project.technologies.count > 5 %}
                                <span style="background: var(--bg-secondary); color: var(--text-muted); padding: 4px 8px; border-radius: var(--radius-sm); font-size: 11px;">
                                    +{{ project.technologies.count|add:"-5" }} more
                                </span>
                                {% endif %}
                            </div>
                        </div>
                        {% endif %}
                        
                        <!-- Project Links -->
                        <div style="display: flex; gap: var(--spacing-sm);">
                            {% if project.github_url %}
                            <a href="{{ project.github_url }}" target="_blank" class="btn btn-ghost" style="flex: 1; padding: 8px 16px; font-size: 14px;">
                                <i class="fab fa-github me-1"></i>Code
                            </a>
                            {% endif %}
                            {% if project.live_url %}
                            <a href="{{ project.live_url }}" target="_blank" class="btn btn-primary" style="flex: 1; padding: 8px 16px; font-size: 14px;">
                                <i class="fas fa-external-link-alt me-1"></i>Live
                            </a>
                            {% endif %}
                        </div>
                        
                        <!-- Completion Date -->
                        {% if project.completed_date %}
                        <div style="margin-top: var(--spacing-sm); text-align: center;">
                            <small style="color: var(--text-muted); font-size: 12px;">
                                <i class="fas fa-calendar me-1"></i>Completed {{ project.completed_date|date:"M Y" }}
                            </small>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="col-12 text-center" style="padding: var(--spacing-2xl);">
                <div style="width: 120px; height: 120px; background: var(--bg-card); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto var(--spacing-lg); color: var(--text-muted);">
                    <i class="fas fa-folder-open" style="font-size: 48px;"></i>
                </div>
                <h3 style="color: var(--text-secondary); margin-bottom: var(--spacing-sm);">No projects found</h3>
                <p style="color: var(--text-muted);">Try adjusting your search or filter criteria.</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Call to Action Section -->
<section class="section" style="background: var(--bg-secondary);">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 text-center">
                <div class="glass" style="padding: var(--spacing-2xl); border-radius: var(--radius-xl);">
                    <h2 style="color: var(--text-primary); margin-bottom: var(--spacing-md);">Interested in my work?</h2>
                    <p style="font-size: 1.1rem; color: var(--text-secondary); margin-bottom: var(--spacing-xl); max-width: 600px; margin-left: auto; margin-right: auto;">
                        I'm always excited to work on new projects and collaborate with amazing people. Let's discuss how we can bring your ideas to life!
                    </p>
                    
                    <div style="display: flex; gap: var(--spacing-md); justify-content: center; flex-wrap: wrap;">
                        <a href="{% url 'contact' %}" class="btn btn-primary">
                            <i class="fas fa-paper-plane me-2"></i>Get In Touch
                        </a>
                        <a href="{% url 'about' %}" class="btn btn-secondary">
                            <i class="fas fa-user me-2"></i>Learn More About Me
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}

<script>
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('searchInput');
    const categoryFilter = document.getElementById('categoryFilter');
    const sortFilter = document.getElementById('sortFilter');
    const clearFilters = document.getElementById('clearFilters');
    const projectsGrid = document.getElementById('projectsGrid');
    const projectItems = document.querySelectorAll('.project-item');
    
    // Search functionality
    searchInput.addEventListener('input', filterProjects);
    categoryFilter.addEventListener('change', filterProjects);
    sortFilter.addEventListener('change', filterProjects);
    
    // Clear filters
    clearFilters.addEventListener('click', function() {
        searchInput.value = '';
        categoryFilter.value = '';
        sortFilter.value = 'featured';
        filterProjects();
    });
    
    function filterProjects() {
        const searchTerm = searchInput.value.toLowerCase();
        const selectedCategory = categoryFilter.value;
        const sortBy = sortFilter.value;
        
        let visibleProjects = [];
        
        projectItems.forEach(item => {
            const title = item.dataset.title;
            const category = item.dataset.category;
            const isVisible = (searchTerm === '' || title.includes(searchTerm)) && 
                            (selectedCategory === '' || category === selectedCategory);
            
            if (isVisible) {
                visibleProjects.push(item);
                item.style.display = 'block';
            } else {
                item.style.display = 'none';
            }
        });
        
        // Sort projects
        if (sortBy === 'recent') {
            visibleProjects.sort((a, b) => {
                const dateA = new Date(a.querySelector('small')?.textContent?.match(/\w+ \d{4}/)?.[0] || '');
                const dateB = new Date(b.querySelector('small')?.textContent?.match(/\w+ \d{4}/)?.[0] || '');
                return dateB - dateA;
            });
        } else if (sortBy === 'name') {
            visibleProjects.sort((a, b) => {
                const titleA = a.querySelector('h4').textContent.toLowerCase();
                const titleB = b.querySelector('h4').textContent.toLowerCase();
                return titleA.localeCompare(titleB);
            });
        } else {
            // Featured first
            visibleProjects.sort((a, b) => {
                const featuredA = a.querySelector('.fa-star') ? 1 : 0;
                const featuredB = b.querySelector('.fa-star') ? 1 : 0;
                return featuredB - featuredA;
            });
        }
        
        // Reorder projects in DOM
        visibleProjects.forEach(item => {
            projectsGrid.appendChild(item);
        });
        
        // Show/hide no results message
        const noResults = projectsGrid.querySelector('.col-12.text-center');
        if (visibleProjects.length === 0) {
            if (!noResults) {
                const noResultsDiv = document.createElement('div');
                noResultsDiv.className = 'col-12 text-center';
                noResultsDiv.style.padding = 'var(--spacing-2xl)';
                noResultsDiv.innerHTML = `
                    <div style="width: 120px; height: 120px; background: var(--bg-card); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto var(--spacing-lg); color: var(--text-muted);">
                        <i class="fas fa-search" style="font-size: 48px;"></i>
                    </div>
                    <h3 style="color: var(--text-secondary); margin-bottom: var(--spacing-sm);">No projects found</h3>
                    <p style="color: var(--text-muted);">Try adjusting your search or filter criteria.</p>
                `;
                projectsGrid.appendChild(noResultsDiv);
            }
        } else if (noResults) {
            noResults.remove();
        }
    }
});
</script>

<style>
.hero-title {
    animation: fadeInUp 0.8s ease-out;
}

.hero-content {
    animation: fadeInUp 0.8s ease-out;
}

.project-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-xl), var(--shadow-glow);
}

.project-card {
    transition: all var(--transition-normal);
}

@media (max-width: 768px) {
    .hero-section {
        text-align: center;
        padding: var(--spacing-xl) 0;
    }
    
    .stats-container {
        grid-template-columns: repeat(3, 1fr);
    }
}
</style>
